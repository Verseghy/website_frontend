<div class="container" mdcTypography>
  <div class="header">
    <span class="remaining-time" mdcHeadline5>Hátralévő idő: {{ remainingTime | async }}</span> <!-- TODO(zoltanszepesi): refactor this into a new component -->
    <button mdc-button (click)="logout()">Kilépés</button>
    <div class="problem-grid">
      <div class="problem-grid-elem" [class.done]="problem.solution !== null" *ngFor="let problem of paginated$ | async">
        {{ problem.id + 1 }}
      </div>
    </div>
  </div>

  <ng-container *ngTemplateOutlet="paginationNumbers"></ng-container>

  <div class="problems" [hidden]="!loaded">
    <div class="problem-card" *ngFor="let a of paginated$ | async; trackBy: trackByFn">
      <div class="problem-header">{{ a.id + 1 }}. feladat</div>
      <div class="problem-description tex">
        {{ a.text | tex }}
      </div>
      <mdc-text-field
        [value]="a.solution"
        outlined
        placeholder="Megoldás"
        type="number"
        (keyup)="blurField($event)"
        (blur)="setSolution(a.id, $event)"
        autocomplete="off"
      ></mdc-text-field>
    </div>
  </div>

  <div class="loader" *ngIf="!loaded">
    Feladatok betöltése...
  </div>

  <ng-container *ngTemplateOutlet="paginationNumbers"></ng-container>
</div>

<ng-template #paginationNumbers>
  <div class="pagination-numbers">
    <button mdc-button [disabled]="disablePrevPage$ | async" (click)="prevPage()">Előző</button>
    <button mdc-button [disabled]="disableNextPage$ | async" (click)="nextPage()">Következő</button>
  </div>
</ng-template>
